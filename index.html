<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Auction Arena Gold - El Juego</title>
    <style>
        :root {
            --gold: #ffd700;
            --dark-bg: #0f0f0f;
            --card-bg: #1e1e1e;
            --accent: #ff4500;
        }

        body {
            background-color: var(--dark-bg);
            color: #fff;
            font-family: 'Inter', sans-serif;
            margin: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
            justify-content: center;
        }

        .ad-space {
            width: 100%;
            max-width: 728px;
            height: 60px; /* Reducido para mejor visibilidad */
            background: #222;
            margin: 5px 0;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #555;
            font-size: 0.7rem;
            border: 1px dashed #444;
        }

        #game-board {
            width: 90%;
            max-width: 400px;
            background: var(--card-bg);
            padding: 20px;
            border-radius: 20px;
            border: 2px solid #333;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
        }

        .stats {
            display: flex;
            justify-content: space-between;
            margin-bottom: 15px;
            color: var(--gold);
            font-weight: bold;
        }

        #item-display {
            border: 2px solid #444;
            border-radius: 15px;
            padding: 15px;
            background: linear-gradient(145deg, #252525, #1a1a1a);
            text-align: center;
        }

        .timer-container {
            width: 100%;
            height: 10px;
            background: #333;
            border-radius: 5px;
            margin: 15px 0;
            overflow: hidden;
        }

        #timer-bar {
            width: 100%;
            height: 100%;
            background: var(--accent);
        }

        .controls {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
        }

        button {
            padding: 12px;
            border: none;
            border-radius: 10px;
            font-weight: bold;
            cursor: pointer;
        }

        .btn-bid { background: var(--gold); color: #000; font-size: 1.1rem; }
        .btn-powerup { background: #444; color: var(--gold); border: 1px solid var(--gold); }
        .btn-ad { background: #28a745; color: white; grid-column: span 2; margin-top: 5px; }

        #overlay {
            display: none;
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.9);
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 100;
            text-align: center;
        }
    </style>
</head>
<body>

    <div class="ad-space">Publicidad</div>

    <div id="game-board">
        <div class="stats">
            <span>ðŸ’° <span id="balance">1000</span></span>
            <span>Nivel: <span id="level">1</span></span>
        </div>

        <div id="item-display">
            <small id="rarity-text"></small>
            <h2 id="item-name" style="margin: 5px 0;">Cargando...</h2>
            <div style="font-size: 1.3rem; margin: 10px 0;">Puja: <span id="current-bid" style="color: var(--gold);">0</span></div>
            <div id="winner-text" style="font-size: 0.8rem; color: #aaa;">Esperando ofertas...</div>
        </div>

        <div class="timer-container">
            <div id="timer-bar"></div>
        </div>

        <div class="controls">
            <button class="btn-bid" onclick="playerBid()">PUJAR (+50)</button>
            <button class="btn-powerup" id="hammer-btn" onclick="useHammer()">ðŸ”¨ MAZO</button>
            <button class="btn-ad" id="ad-btn" onclick="watchAd()">ðŸ“º Fondos Extra (Anuncio)</button>
        </div>
    </div>

    <div id="overlay">
        <h1 id="modal-title">Resultado</h1>
        <p id="modal-msg"></p>
        <button onclick="closeModal()" style="background: var(--gold); padding: 10px 40px;">CONTINUAR</button>
    </div>

    <script>
        let balance = parseInt(localStorage.getItem('auction_balance')) || 1000;
        let level = parseInt(localStorage.getItem('auction_level')) || 1;
        let currentBid = 0;
        let timeLeft = 12;
        let timerInterval;
        let lastBidder = "Nadie";
        let botsBlocked = false;

        const items = [
            { name: "Daga de las Sombras", rarity: "COMÃšN", color: "#b2b2b2", base: 100 },
            { name: "Capa de Niebla", rarity: "RARO", color: "#00ceff", base: 500 },
            { name: "Anillo Ãšnico", rarity: "Ã‰PICO", color: "#a335ee", base: 1200 },
            { name: "Cetro Real", rarity: "LEGENDARIO", color: "#ff8c00", base: 3000 }
        ];

        function initLevel() {
            let item = items[(level - 1) % items.length];
            currentBid = item.base + (level * 20);
            timeLeft = 12;
            lastBidder = "Nadie";
            botsBlocked = false;
            
            document.getElementById('item-name').innerText = item.name;
            document.getElementById('rarity-text').innerText = item.rarity;
            document.getElementById('rarity-text').style.color = item.color;
            document.getElementById('item-display').style.borderColor = item.color;
            document.getElementById('hammer-btn').disabled = false;
            
            updateUI();
            startTimer();
        }

        function startTimer() {
            clearInterval(timerInterval);
            timerInterval = setInterval(() => {
                timeLeft -= 0.1;
                document.getElementById('timer-bar').style.width = (timeLeft / 12 * 100) + "%";

                if (!botsBlocked && timeLeft > 1 && Math.random() > 0.97) {
                    botBid();
                }

                if (timeLeft <= 0) {
                    clearInterval(timerInterval);
                    endAuction();
                }
            }, 100);
        }

        function playerBid() {
            if (balance >= currentBid + 50) {
                currentBid += 50;
                lastBidder = "TÃº";
                timeLeft = Math.min(timeLeft + 2, 5);
                updateUI();
            }
        }

        function botBid() {
            currentBid += 50;
            lastBidder = "Bot " + ["A", "B", "C"][Math.floor(Math.random()*3)];
            timeLeft = Math.min(timeLeft + 2, 5);
            updateUI();
        }

        function useHammer() {
            botsBlocked = true;
            document.getElementById('hammer-btn').disabled = true;
            setTimeout(() => { botsBlocked = false; }, 3000);
        }

        function watchAd() {
            alert("Simulando anuncio de 5s...");
            setTimeout(() => { balance += 500; updateUI(); }, 5000);
        }

        function updateUI() {
            document.getElementById('balance').innerText = balance;
            document.getElementById('level').innerText = level;
            document.getElementById('current-bid').innerText = "$" + currentBid;
            document.getElementById('winner-text').innerText = "LÃ­der: " + lastBidder;
            localStorage.setItem('auction_balance', balance);
            localStorage.setItem('auction_level', level);
        }

        function endAuction() {
            const overlay = document.getElementById('overlay');
            overlay.style.display = "flex";
            if (lastBidder === "TÃº") {
                balance -= currentBid;
                level++;
                document.getElementById('modal-msg').innerText = "Â¡Ganaste!";
            } else {
                document.getElementById('modal-msg').innerText = "Perdiste contra " + lastBidder;
            }
        }

        function closeModal() {
            document.getElementById('overlay').style.display = "none";
            initLevel();
        }

        initLevel();
    </script>
</body>
</html>
